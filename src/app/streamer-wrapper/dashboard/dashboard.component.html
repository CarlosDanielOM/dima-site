<div class="min-h-screen bg-white text-zinc-900 dark:bg-zinc-950 dark:text-zinc-100 w-full relative">
    <!-- Watermark overlay -->
    <div class="watermark-overlay pointer-events-none" aria-hidden="true"></div>
    <!-- Header -->
    <header class="top-0 z-30 backdrop-blur border-b border-zinc-200 bg-white/70 dark:border-zinc-800 dark:bg-zinc-950/70">
      <div class="w-full px-4 sm:px-6 lg:px-8 h-16 flex items-center justify-between">
        <div class="flex items-center gap-3">
          <div class="size-9 rounded-lg bg-fuchsia-600 flex items-center justify-center">
            <!-- Lucide: Activity -->
            <lucide-icon [name]="Activity" class="size-5 text-white"></lucide-icon>
          </div>
          <div class="leading-tight">
            <p class="text-sm text-zinc-400">Dashboard</p>
            <h1 class="text-lg font-semibold tracking-tight">
              {{ channelName() }}
            </h1>
          </div>
        </div>
  
        <div class="flex items-center gap-3">
          <button class="inline-flex items-center gap-2 rounded-lg border border-zinc-200 bg-white hover:bg-zinc-50 px-3 h-9 text-sm dark:border-zinc-800 dark:bg-zinc-900 dark:hover:bg-zinc-800">
            <lucide-icon [name]="Calendar" class="size-4 text-zinc-600 dark:text-zinc-300"></lucide-icon>
            Last 30 days
          </button>
          <button class="inline-flex items-center gap-2 rounded-lg bg-fuchsia-600 hover:bg-fuchsia-500 px-4 h-9 text-sm font-medium">
            <lucide-icon [name]="BarChart2" class="size-4 text-white"></lucide-icon>
            Export
          </button>
        </div>
      </div>
    </header>
  
    <!-- Content -->
    <main class="w-full px-4 sm:px-6 lg:px-8 py-8 space-y-8">
      <!-- KPI Grid -->
      <section class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4">
        <!-- Active Viewers -->
        <article class="rounded-xl border border-zinc-200 bg-white p-4 dark:border-zinc-800 dark:bg-zinc-900/60">
          <div class="flex items-center justify-between">
            <div class="flex items-center gap-2">
              <div class="size-9 rounded-lg bg-zinc-100 dark:bg-zinc-800/80 flex items-center justify-center">
                <lucide-icon [name]="Users" class="size-4 text-fuchsia-400"></lucide-icon>
              </div>
              <p class="text-sm text-zinc-500 dark:text-zinc-400">Active Viewers</p>
            </div>
            <span class="text-xs text-zinc-500">Now</span>
          </div>
          <div class="mt-3">
            <p class="text-2xl font-semibold">{{ toCompact(activeViewers()) }}</p>
            <p class="text-xs text-zinc-500">Live or last stream</p>
          </div>
        </article>
  
        <!-- Average Viewers -->
        <article class="rounded-xl border border-zinc-200 bg-white p-4 dark:border-zinc-800 dark:bg-zinc-900/60">
          <div class="flex items-center justify-between">
            <div class="flex items-center gap-2">
              <div class="size-9 rounded-lg bg-zinc-100 dark:bg-zinc-800/80 flex items-center justify-center">
                <lucide-icon [name]="TrendingUp" class="size-4 text-emerald-400"></lucide-icon>
              </div>
              <p class="text-sm text-zinc-500 dark:text-zinc-400">Average Viewers</p>
            </div>
            <span class="text-xs text-zinc-500">Per stream</span>
          </div>
          <div class="mt-3">
            <p class="text-2xl font-semibold">{{ toCompact(averageViewers()) }}</p>
            <p class="text-xs text-zinc-500">Monthly Avg: {{ toCompact(monthlyAverageViewers()) }}</p>
          </div>
        </article>
  
        <!-- Avg Hours per Stream -->
        <article class="rounded-xl border border-zinc-200 bg-white p-4 dark:border-zinc-800 dark:bg-zinc-900/60">
          <div class="flex items-center justify-between">
            <div class="flex items-center gap-2">
              <div class="size-9 rounded-lg bg-zinc-100 dark:bg-zinc-800/80 flex items-center justify-center">
                <lucide-icon [name]="Clock" class="size-4 text-sky-400"></lucide-icon>
              </div>
              <p class="text-sm text-zinc-500 dark:text-zinc-400">Avg Hours / Stream</p>
            </div>
            <span class="text-xs text-zinc-500">Duration</span>
          </div>
          <div class="mt-3">
            <p class="text-2xl font-semibold">{{ averageHoursPerStream() }}</p>
            <p class="text-xs text-zinc-500">Total Streams: {{ totalStreams() }}</p>
          </div>
        </article>
  
        <!-- Donations -->
        <article class="rounded-xl border border-zinc-200 bg-white p-4 dark:border-zinc-800 dark:bg-zinc-900/60">
          <div class="flex items-center justify-between">
            <div class="flex items-center gap-2">
              <div class="size-9 rounded-lg bg-zinc-100 dark:bg-zinc-800/80 flex items-center justify-center">
                <lucide-icon [name]="DollarSign" class="size-4 text-amber-400"></lucide-icon>
              </div>
              <p class="text-sm text-zinc-500 dark:text-zinc-400">Donations</p>
            </div>
            <span class="text-xs text-zinc-500">30 days</span>
          </div>
          <div class="mt-3">
            <p class="text-2xl font-semibold">{{ toCurrency(totalDonations()) }}</p>
            <p class="text-xs text-zinc-500">Sum by stream</p>
          </div>
        </article>
      </section>
  
      <!-- Audience & Monetization -->
      <section class="grid grid-cols-1 lg:grid-cols-3 gap-4">
        <!-- Viewers Trend (Placeholder chart) -->
        <article class="lg:col-span-2 rounded-xl border border-zinc-200 bg-white p-4 dark:border-zinc-800 dark:bg-zinc-900/60">
          <div class="flex items-center justify-between mb-3">
            <div class="flex items-center gap-2">
              <div class="size-9 rounded-lg bg-zinc-100 dark:bg-zinc-800/80 flex items-center justify-center">
                <lucide-icon [name]="Activity" class="size-4 text-fuchsia-400"></lucide-icon>
              </div>
              <div>
                <p class="text-sm text-zinc-500 dark:text-zinc-400">Viewers Trend</p>
                <p class="text-xs text-zinc-500">Per stream over time</p>
              </div>
            </div>
            <button class="text-xs rounded-md border border-zinc-200 px-2 h-7 bg-white hover:bg-zinc-50 dark:border-zinc-800 dark:bg-zinc-900 dark:hover:bg-zinc-800">
              <lucide-icon [name]="ChevronDown" class="size-4 text-zinc-600 dark:text-zinc-300"></lucide-icon>
              Details
            </button>
          </div>
  
          <!-- Replace with a chart component (e.g., ngx-charts, apexcharts) -->
          <div class="h-56 rounded-lg bg-zinc-50 border border-zinc-200 grid place-items-center dark:bg-zinc-950/60 dark:border-zinc-800">
            <p class="text-sm text-zinc-500">Chart placeholder (viewers by date)</p>
          </div>
  
          <!-- Mini legend -->
          <div class="mt-3 flex items-center gap-4 text-xs text-zinc-500 dark:text-zinc-400">
            <div class="flex items-center gap-2">
              <span class="size-2 rounded-full bg-fuchsia-400"></span> Viewers
            </div>
            <div class="flex items-center gap-2">
              <span class="size-2 rounded-full bg-sky-400"></span> Hours
            </div>
          </div>
        </article>
  
        <!-- Follows & Subs Card -->
        <article class="rounded-xl border border-zinc-200 bg-white p-4 dark:border-zinc-800 dark:bg-zinc-900/60">
          <div class="flex items-center gap-2 mb-3">
            <div class="size-9 rounded-lg bg-zinc-100 dark:bg-zinc-800/80 flex items-center justify-center">
              <lucide-icon [name]="Heart" class="size-4 text-rose-400"></lucide-icon>
            </div>
            <div>
              <p class="text-sm text-zinc-500 dark:text-zinc-400">Follows & Subs</p>
              <p class="text-xs text-zinc-500">Active community</p>
            </div>
          </div>
  
          <!-- Active Follows -->
          <div class="flex items-center justify-between">
            <div class="text-sm text-zinc-500 dark:text-zinc-400">Active Follows</div>
            <div class="text-base font-semibold">{{ toCompact(activeFollows()) }}</div>
          </div>
  
          <!-- Active Subs with progress -->
          <div class="mt-4">
            <div class="flex items-center justify-between">
              <div class="flex items-center gap-2">
                <lucide-icon [name]="Star" class="size-4 text-yellow-400"></lucide-icon>
                <p class="text-sm text-zinc-500 dark:text-zinc-400">Active Subs</p>
              </div>
              <div class="text-sm">{{ toCompact(activeSubs()) }} / {{ toCompact(monthlyGoalSubs()) }}</div>
            </div>
            <div class="mt-2 h-2 w-full rounded-full bg-zinc-200 overflow-hidden dark:bg-zinc-800">
              <div
                class="h-full rounded-full bg-gradient-to-r from-yellow-400 via-amber-400 to-amber-500"
                [style.width.%]="subsProgressPct()">
              </div>
            </div>
            <p class="mt-1 text-xs text-zinc-500">{{ subsProgressPct() }}% to monthly goal</p>
          </div>
        </article>
      </section>
  
      <!-- Streams Table -->
      <section class="rounded-xl border border-zinc-200 bg-white overflow-hidden dark:border-zinc-800 dark:bg-zinc-900/60">
        <div class="p-4 border-b border-zinc-200 flex items-center justify-between dark:border-zinc-800">
          <div class="flex items-center gap-2">
            <div class="size-9 rounded-lg bg-zinc-100 dark:bg-zinc-800/80 flex items-center justify-center">
              <lucide-icon [name]="BarChart2" class="size-4 text-sky-400"></lucide-icon>
            </div>
            <div>
              <p class="text-sm text-zinc-500 dark:text-zinc-400">Stream Performance</p>
              <p class="text-xs text-zinc-500">Per-stream metrics</p>
            </div>
          </div>
          <div class="flex gap-2">
            <input
              type="text"
              placeholder="Search streams..."
              class="h-9 px-3 rounded-md bg-white border border-zinc-300 text-sm focus:outline-none focus:ring-1 focus:ring-fuchsia-500 dark:bg-zinc-950 dark:border-zinc-800"
            />
            <button class="h-9 px-3 rounded-md border border-zinc-200 bg-white hover:bg-zinc-50 text-sm dark:border-zinc-800 dark:bg-zinc-900 dark:hover:bg-zinc-800">Filter</button>
          </div>
        </div>
  
        <div class="overflow-x-auto">
          <table class="min-w-full text-sm">
            <thead class="bg-zinc-50 border-b border-zinc-200 text-zinc-500 dark:bg-zinc-950/60 dark:border-zinc-800 dark:text-zinc-400">
              <tr>
                <th class="text-left font-medium p-3">Date</th>
                <th class="text-left font-medium p-3">Viewers</th>
                <th class="text-left font-medium p-3">Hours</th>
                <th class="text-left font-medium p-3">Donations</th>
                <th class="text-left font-medium p-3">Follows</th>
                <th class="text-left font-medium p-3">Subs</th>
              </tr>
            </thead>
            <tbody>
              <tr
                *ngFor="let s of streamHistory()"
                class="border-b border-zinc-200 hover:bg-zinc-50 dark:border-zinc-800/60 dark:hover:bg-zinc-900/80"
              >
                <td class="p-3">{{ formatDate(s.date) }}</td>
                <td class="p-3">{{ toCompact(s.viewers) }}</td>
                <td class="p-3">{{ s.hours }}</td>
                <td class="p-3">{{ toCurrency(s.donations) }}</td>
                <td class="p-3">{{ toCompact(s.follows) }}</td>
                <td class="p-3">{{ toCompact(s.subs) }}</td>
              </tr>
            </tbody>
          </table>
        </div>
  
        <div class="p-4 flex items-center justify-between text-xs text-zinc-500">
          <span>Showing {{ totalStreams() }} streams</span>
          <button class="px-3 h-8 rounded-md border border-zinc-200 bg-white hover:bg-zinc-50 dark:border-zinc-800 dark:bg-zinc-900 dark:hover:bg-zinc-800">Load more</button>
        </div>
      </section>
    </main>
  </div>

<!-- <div class="container mx-auto w-full">
    <div class="row w-full">
        <h1 class="text-center w-full text-2xl font-bold inline-block">Dashboard</h1>
        @if(active) {
            <div class="absolute right-2 inline-block">
                <button class="bg-blue-500 text-white px-4 py-2 rounded-md" (click)="toggleChatEnabled()">
                    {{ chat_enabled ? 'Leave Chat' : 'Join Chat' }}
                </button>
            </div>
        } @else {
            <div class="absolute right-2 inline-block">
                <button class="bg-blue-500 text-white px-4 py-2 rounded-md disabled:opacity-50" disabled >
                    Bot is not active
                </button>
            </div>
        }
    </div>
</div> -->