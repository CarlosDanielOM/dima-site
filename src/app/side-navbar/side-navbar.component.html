<!-- Mobile Sidebar -->
<div class="fixed inset-0 z-40 md:hidden">
  <!-- Backdrop -->
  <div class="fixed inset-0" *ngIf="isOpen" (click)="toggleSidebar()"></div>
  <!-- Sidebar -->
  <div class="fixed inset-y-0 left-0 bg-white shadow-lg mt-16 transition-all duration-300 ease-in-out z-50"
       [class.w-[60px]]="!isOpen"
       [class.w-[240px]]="isOpen"
       [class.sm:w-[300px]]="isOpen">
    <nav class="flex flex-col h-full">
      
      <div class="overflow-y-auto flex-1">
        <div class="space-y-2 py-4">
          <!-- Toggle Button -->
          <button (click)="toggleSidebar()" class="flex items-center py-2 px-4 text-sm font-medium rounded-md hover:bg-purple-100 w-full">
            <i-lucide [name]="menuIcon" class="w-6 h-6 flex-shrink-0"></i-lucide>
            <span class="ml-2 text-sm font-medium whitespace-nowrap" [class.hidden]="!isOpen">Close Menu</span>
          </button>
          @for(link of links; track link.href) {
            @if(!link.disabled) {
              <a
                [routerLink]="link.href"
                class="flex items-center py-2 px-4 text-sm font-medium rounded-md hover:bg-purple-100 w-full"
                (click)="isOpen = false"
              >
                <i-lucide [name]="link.icon" class="w-5 h-5 mr-2 flex-shrink-0"></i-lucide>
                <span class="whitespace-nowrap" [class.hidden]="!isOpen">{{ link.label }}</span>
                @if(link.premium_plus) {
                  <i-lucide [name]="crownIcon" class="w-4 h-4 ml-1 text-yellow-500 relative">
                    <span class="absolute -top-2 -right-2 text-[10px] font-bold text-yellow-500 bg-white rounded-full px-0.5">+</span>
                  </i-lucide>
                } @else if(link.premium) {
                  <i-lucide [name]="crownIcon" class="w-4 h-4 ml-1 text-yellow-500"></i-lucide>
                }
              </a>
            } @else {
              <div class="flex items-center py-2 px-4 text-sm font-medium rounded-md hover:bg-purple-100 w-full opacity-50">
                <i-lucide [name]="constructionIcon" class="w-5 h-5 mr-2 flex-shrink-0"></i-lucide>
                <span class="whitespace-nowrap" [class.hidden]="!isOpen">{{ link.label }}</span>
                @if(link.premium_plus) {
                  <i-lucide [name]="crownIcon" class="w-4 h-4 ml-1 text-yellow-500 relative">
                    <span class="absolute -top-2 -right-2 text-[10px] font-bold text-yellow-500 bg-white rounded-full px-0.5">+</span>
                  </i-lucide>
                } @else if(link.premium) {
                  <i-lucide [name]="crownIcon" class="w-4 h-4 ml-1 text-yellow-500"></i-lucide>
                }
              </div>
            }
          }
        </div>
      </div>
    </nav>
  </div>
</div>

<!-- Desktop Sidebar -->
<div class="hidden md:block h-[calc(100vh-64px)] fixed left-0 top-16 w-[240px] bg-white border-r border-gray-200">
  <nav class="flex flex-col h-full">
    <div class="overflow-y-auto flex-1">
      <div class="space-y-2 px-4 py-4">
        @for(link of links; track link.href) {
          @if(!link.disabled) {
            <a
              [routerLink]="link.href"
              class="flex items-center py-2 px-4 text-sm font-medium rounded-md hover:bg-purple-100 w-full"
            >
              <i-lucide [name]="link.icon" class="w-5 h-5 mr-2 flex-shrink-0"></i-lucide>
              <span class="whitespace-nowrap">{{ link.label }}</span>
              @if(link.premium_plus) {
                <i-lucide [name]="crownIcon" class="w-4 h-4 ml-1 text-yellow-500 relative">
                  <span class="absolute -top-2 -right-2 text-[10px] font-bold text-yellow-500 bg-white rounded-full px-0.5">+</span>
                </i-lucide>
              } @else if(link.premium) {
                <i-lucide [name]="crownIcon" class="w-4 h-4 ml-1 text-yellow-500"></i-lucide>
              }
            </a>
          } @else {
            <div class="flex items-center py-2 px-4 text-sm font-medium rounded-md hover:bg-purple-100 w-full opacity-50">
              <i-lucide [name]="constructionIcon" class="w-5 h-5 mr-2 flex-shrink-0"></i-lucide>
              <span class="whitespace-nowrap">{{ link.label }}</span>
              @if(link.premium_plus) {
                <i-lucide [name]="crownIcon" class="w-4 h-4 ml-1 text-yellow-500 relative">
                  <span class="absolute -top-2 -right-2 text-[10px] font-bold text-yellow-500 bg-white rounded-full px-0.5">+</span>
                </i-lucide>
              } @else if(link.premium) {
                <i-lucide [name]="crownIcon" class="w-4 h-4 ml-1 text-yellow-500"></i-lucide>
              }
            </div>
          }
        }
      </div>
    </div>
  </nav>
</div> 